<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Document</title>
    {% block head %} {% endblock head %}
  </head>
  <body>
    {% if user.is_authenticated %}
    <li><a href="{% url 'users:logout' %}">Logout</a></li>
    <button class="Nlogout" onclick="naverlogout()">
      {% csrf_token %}네이버 로그아웃
    </button>
    {% else %}
    <li><a href="{% url 'users:login' %}">Login</a></li>
    <li><a href="{% url 'users:signup' %}">Signup</a></li>
    {% endif %} {% block content %} {% endblock content %}
    <script>

    function naverlogout() {
      accsTK = localStorage.getItem('accsTK')
      fetch(
        `https://nid.naver.com/oauth2.0/token?grant_type=delete&client_id=p3ty5OZcY15ufMgrfHPe&client_secret=EfaVjbEQ5T&access_token=${accsTK}&state=9caf3774-d3e0-4977-ab79-04e4e5e0c2b5&state=be6efbf7-bf94-4b29-b36f-663213729980&service_provider=NAVER`,
        {
          mode: "no-cors",
          method: "GET",
        }
      )
        .then(() => {
          console.log("로그아웃 성공");
        })
        .catch((error) => console.log(error));
    }
  </script>
  </body>
</html>
